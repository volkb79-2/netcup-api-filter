# ============================================================================
# Service Names Configuration (Central Source of Truth)
# ============================================================================
# Purpose: Define all service/container names in one place
# Used by: docker-compose.yml, nginx configs, Python code, shell scripts
# 
# Naming Convention: ${PROJECT_TAG}-${ENV_TAG}-{service}
# - PROJECT_TAG: Project identifier (naf = netcup-api-filter)
# - ENV_TAG: Environment (dev, staging, prod)
# - service: Service function (mailpit, reverse-proxy, etc.)
# 
# CRITICAL: Source this file before using service names:
#   source .env.services
# ============================================================================

# Project identification (inherited from .env.workspace)
PROJECT_TAG="${PROJECT_TAG:-naf}"
ENV_TAG="${ENV_TAG:-dev}"

# ============================================================================
# Service Names (used in docker-compose.yml, scripts, configs)
# ============================================================================

# Playwright browser automation
SERVICE_PLAYWRIGHT="${PROJECT_TAG}-${ENV_TAG}-playwright"
SERVICE_PLAYWRIGHT_CERT_GEN="${PROJECT_TAG}-${ENV_TAG}-playwright-cert-gen"

# SMTP testing
SERVICE_MAILPIT="${PROJECT_TAG}-${ENV_TAG}-mailpit"

# Mock services
SERVICE_MOCK_NETCUP_API="${PROJECT_TAG}-${ENV_TAG}-mock-netcup-api"
SERVICE_MOCK_GEOIP="${PROJECT_TAG}-${ENV_TAG}-mock-geoip"

# TLS reverse proxy
SERVICE_REVERSE_PROXY="${PROJECT_TAG}-${ENV_TAG}-reverse-proxy"

# ============================================================================
# Container Names (same as service names for simplicity)
# ============================================================================
# Docker Compose will use these as container_name values
# This avoids the directory-prefix issue (playwright-naf-dev-playwright-1)

CONTAINER_PLAYWRIGHT="${SERVICE_PLAYWRIGHT}"
CONTAINER_PLAYWRIGHT_CERT_GEN="${SERVICE_PLAYWRIGHT_CERT_GEN}"
CONTAINER_MAILPIT="${SERVICE_MAILPIT}"
CONTAINER_MOCK_NETCUP_API="${SERVICE_MOCK_NETCUP_API}"
CONTAINER_MOCK_GEOIP="${SERVICE_MOCK_GEOIP}"
CONTAINER_REVERSE_PROXY="${SERVICE_REVERSE_PROXY}"

# ============================================================================
# Service Hostnames (for network communication)
# ============================================================================
# These are DNS names used within Docker networks
# Format: Same as service names (Docker DNS uses service/container name)

HOSTNAME_PLAYWRIGHT="${SERVICE_PLAYWRIGHT}"
HOSTNAME_MAILPIT="${SERVICE_MAILPIT}"
HOSTNAME_MOCK_NETCUP_API="${SERVICE_MOCK_NETCUP_API}"
HOSTNAME_MOCK_GEOIP="${SERVICE_MOCK_GEOIP}"
HOSTNAME_REVERSE_PROXY="${SERVICE_REVERSE_PROXY}"

# ============================================================================
# Service URLs (for client connections)
# ============================================================================

# Mailpit API (internal Docker network)
MAILPIT_INTERNAL_URL="http://${HOSTNAME_MAILPIT}:8025/mailpit"
MAILPIT_API_URL="${MAILPIT_INTERNAL_URL}/api/v1"

# Mock Netcup API (internal Docker network)
MOCK_NETCUP_API_URL="http://${HOSTNAME_MOCK_NETCUP_API}"

# Mock GeoIP API (internal Docker network)
MOCK_GEOIP_API_URL="http://${HOSTNAME_MOCK_GEOIP}"

# ============================================================================
# Export all variables for subprocesses
# ============================================================================
export PROJECT_TAG ENV_TAG
export SERVICE_PLAYWRIGHT SERVICE_PLAYWRIGHT_CERT_GEN SERVICE_MAILPIT
export SERVICE_MOCK_NETCUP_API SERVICE_MOCK_GEOIP SERVICE_REVERSE_PROXY
export CONTAINER_PLAYWRIGHT CONTAINER_PLAYWRIGHT_CERT_GEN CONTAINER_MAILPIT
export CONTAINER_MOCK_NETCUP_API CONTAINER_MOCK_GEOIP CONTAINER_REVERSE_PROXY
export HOSTNAME_PLAYWRIGHT HOSTNAME_MAILPIT HOSTNAME_MOCK_NETCUP_API
export HOSTNAME_MOCK_GEOIP HOSTNAME_REVERSE_PROXY
export MAILPIT_INTERNAL_URL MAILPIT_API_URL
export MOCK_NETCUP_API_URL MOCK_GEOIP_API_URL
