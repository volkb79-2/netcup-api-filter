{# Email Verification Page #}
{% extends "standalone_base.html" %}

{% block title %}Verify Your Email - Netcup API Filter{% endblock %}

{% block icon %}bi-envelope-check{% endblock %}

{% block heading %}Verify Your Email{% endblock %}

{% block form_content %}
<p class="text-center text-muted mb-4">
    We've sent a verification code to<br>
    <strong>{{ email }}</strong>
</p>

<form action="{{ url_for('account.verify_email') }}" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <input type="hidden" name="email" value="{{ email }}">
    
    <div class="mb-4">
        <label for="code" class="form-label visually-hidden">Verification Code</label>
        <input type="text" class="form-control form-control-lg text-center" 
               id="code" name="code"
               inputmode="numeric" pattern="[0-9]{6}" 
               maxlength="6"
               placeholder="000000" required autofocus
               style="letter-spacing: 0.5em; font-family: monospace; font-size: 1.5rem;">
        <div class="form-text text-center">Enter the 6-digit code from your email</div>
    </div>

    <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary btn-lg">
            <i class="bi bi-check-lg me-1"></i>Verify Email
        </button>
    </div>
</form>

<div class="mt-4 pt-3 border-top">
    <p class="text-muted small mb-2 text-center">Didn't receive the email?</p>
    <form action="{{ url_for('account.resend_code') }}" method="post" class="text-center">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="hidden" name="email" value="{{ email }}">
        <button type="submit" class="btn btn-link btn-sm">
            <i class="bi bi-arrow-clockwise me-1"></i>Resend verification code
        </button>
    </form>
    <p class="text-muted small mt-2 text-center">
        Check your spam folder or try a different email
    </p>
</div>
{% endblock %}

{% block footer_links %}
<a href="{{ url_for('account.register') }}" class="text-muted text-decoration-none">
    <i class="bi bi-arrow-left me-1"></i>Back to registration
</a>
{% endblock %}

{% block extra_scripts %}
<script>
// Auto-format code input
document.getElementById('code').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6);
});
</script>
{% endblock %}
