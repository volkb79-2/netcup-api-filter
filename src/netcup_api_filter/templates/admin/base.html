{# Admin Base Template - extends base.html with admin navigation #}
{% extends "base.html" %}

{% block brand_link %}{{ url_for('admin.dashboard') }}{% endblock %}

{% block nav_items %}
<ul class="navbar-nav me-auto">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'admin.dashboard' %}active{% endif %}" 
           href="{{ url_for('admin.dashboard') }}">
            Dashboard
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'account' in (request.endpoint or '') and 'pending' not in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.accounts_list') }}">
            Accounts
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'pending' in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.realms_pending') }}">
            Pending
            {% if pending_count %}
            <span class="badge bg-warning text-dark ms-1">{{ pending_count }}</span>
            {% endif %}
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'audit' in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.audit_logs') }}">
            Audit
        </a>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle {% if 'config' in (request.endpoint or '') or 'system' in (request.endpoint or '') %}active{% endif %}" 
           href="#" data-bs-toggle="dropdown">
            Config
        </a>
        <ul class="dropdown-menu">
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.config_netcup') }}">
                    Netcup API
                </a>
            </li>
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.config_email') }}">
                    Email
                </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.system_info') }}">
                    System Info
                </a>
            </li>
        </ul>
    </li>
</ul>
{% endblock %}

{% block user_menu %}
<div class="dropdown">
    <button class="btn btn-sm btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ g.admin.username if g.admin else 'Admin' }}
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
        <li>
            <a class="dropdown-item" href="{{ url_for('admin.change_password') }}">
                Change Password
            </a>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item text-danger" href="{{ url_for('admin.logout') }}">
                Logout
            </a>
        </li>
    </ul>
</div>
{% endblock %}
