{# Admin Base Template - extends base.html with admin navigation #}
{% extends "base.html" %}

{% block brand_link %}{{ url_for('admin.dashboard') }}{% endblock %}

{% block extra_head %}
<style>
/* Flexible card grid layout - use card-info for info display cards */
.card-info {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: center; /* Center cards when fewer than full row */
}
.card-info > .card {
    flex: 1 1 320px;
    min-width: 280px;
    max-width: 450px;
    margin-bottom: 0;
}

/* Form card layout - use card-form for settings/config forms */
.card-form {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: center; /* Center forms when fewer than full row */
}
.card-form > .card {
    flex: 1 1 420px;
    min-width: 360px;
    max-width: 600px;
    margin-bottom: 0;
}
</style>
{% endblock %}

{% block nav_items %}
<ul class="navbar-nav me-auto">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'admin.dashboard' %}active{% endif %}" 
           href="{{ url_for('admin.dashboard') }}">
            Dashboard
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'account' in (request.endpoint or '') and 'pending' not in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.accounts_list') }}">
            Accounts
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'pending' in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.realms_pending') }}">
            Pending
            {% if pending_count %}
            <span class="badge bg-warning text-dark ms-1">{{ pending_count }}</span>
            {% endif %}
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'audit' in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.audit_logs') }}">
            Audit
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if 'security' in (request.endpoint or '') %}active{% endif %}" 
           href="{{ url_for('admin.security_dashboard') }}">
            Security
        </a>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle {% if 'backend' in (request.endpoint or '') or 'domain_root' in (request.endpoint or '') %}active{% endif %}" 
           href="#" data-bs-toggle="dropdown">
            DNS
        </a>
        <ul class="dropdown-menu">
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.backends') }}">
                    Backend Services
                </a>
            </li>
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.domain_roots') }}">
                    Domain Roots
                </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.backend_providers') }}">
                    Providers
                </a>
            </li>
        </ul>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle {% if 'config' in (request.endpoint or '') or 'system' in (request.endpoint or '') or 'settings' in (request.endpoint or '') %}active{% endif %}" 
           href="#" data-bs-toggle="dropdown">
            Config
        </a>
        <ul class="dropdown-menu">
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.settings') }}">
                    Settings
                </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.system_info') }}">
                    System Info
                </a>
            </li>
            <li>
                <a class="dropdown-item" href="{{ url_for('admin.app_logs') }}">
                    Application Logs
                </a>
            </li>
        </ul>
    </li>
</ul>
{% endblock %}

{% block user_menu %}
<div class="dropdown">
    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ g.admin.username if g.admin else 'Admin' }}
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
        <li>
            <a class="dropdown-item" href="{{ url_for('admin.change_password') }}">
                Change Password
            </a>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item text-danger" href="{{ url_for('admin.logout') }}">
                Logout
            </a>
        </li>
    </ul>
</div>
{% endblock %}
