{# 
   Theme Switcher Component
   
   Dropdown with theme and density options.
   Uses localStorage for persistence.
   Ported from /component-demo-bs5
#}

<div class="dropdown">
    <button class="btn btn-sm btn-outline-secondary border-0" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
            aria-label="Theme & density"
            title="Theme & Density">
        <i class="bi bi-stars"></i>
    </button>
    <div class="dropdown-menu dropdown-menu-end" style="min-width: 220px;">
        <h6 class="dropdown-header">
            <i class="bi bi-brush me-2"></i>Theme
        </h6>
        
        {# All 19 Themes - 17 dark + 2 light #}
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('cobalt-2')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #3b7cf5, #070a14)"></span>
            <span>Cobalt 2</span>
            <span class="ms-auto text-muted small">â˜…</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('deep-ocean')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #3b82f6, #0a0e1a)"></span>
            <span>Deep Ocean</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('graphite')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #3b82f6, #08080c)"></span>
            <span>Graphite</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('zinc')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #2dd4bf, #0a0b0c)"></span>
            <span>Zinc</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('obsidian-noir')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #a78bfa, #08080d)"></span>
            <span>Obsidian Noir</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('ember')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #f97316, #0b0907)"></span>
            <span>Ember</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('arctic')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #38bdf8, #090b0f)"></span>
            <span>Arctic</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('jade')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #34d399, #060908)"></span>
            <span>Jade</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('rose-quartz')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #f472b6, #0b090a)"></span>
            <span>Rose Quartz</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('gold-dust')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #fbbf24, #0a0907)"></span>
            <span>Gold Dust</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('crimson')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #f87171, #090707)"></span>
            <span>Crimson</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('amethyst')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #c084fc, #09070b)"></span>
            <span>Amethyst</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('sapphire')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #818cf8, #07080d)"></span>
            <span>Sapphire</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('slate-luxe')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #22d3ee, #0a0c10)"></span>
            <span>Slate Luxe</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('navy')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #4f7cff, #080a12)"></span>
            <span>Navy</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('cobalt')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #2563eb, #070a14)"></span>
            <span>Cobalt</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('midnight-blue')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #6889ff, #080b12)"></span>
            <span>Midnight Blue</span>
        </button>
        
        <div class="dropdown-divider"></div>
        <h6 class="dropdown-header">
            <i class="bi bi-sun me-2"></i>Light Themes
        </h6>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('pearl-light')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #3b82f6, #f5f7fa)"></span>
            <span>Pearl Light</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('ivory-warm')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #f59e0b, #faf8f5)"></span>
            <span>Ivory Warm</span>
        </button>
        
        <div class="dropdown-divider"></div>
        
        <h6 class="dropdown-header">
            <i class="bi bi-arrows-collapse me-2"></i>Density
        </h6>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setDensity('comfortable')">
            <i class="bi bi-distribute-vertical"></i>
            <span>Comfortable</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setDensity('compact')">
            <i class="bi bi-arrows-collapse"></i>
            <span>Compact</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setDensity('ultra-compact')">
            <i class="bi bi-arrows-vertical"></i>
            <span>Ultra Compact</span>
        </button>
    </div>
</div>

<script>
// Theme and Density switcher functions
// Included with component so always available
if (typeof setTheme === 'undefined') {
    function setTheme(theme) {
        const themeRegex = /theme-\S+/g;
        document.documentElement.className = document.documentElement.className.replace(themeRegex, '').trim();
        document.body.className = document.body.className.replace(themeRegex, '').trim();
        document.documentElement.setAttribute('data-theme', theme);
        
        if (theme !== 'cobalt-2') {
            document.documentElement.classList.add('theme-' + theme);
            document.body.classList.add('theme-' + theme);
        }
        localStorage.setItem('naf-theme', theme);
    }
}

if (typeof setDensity === 'undefined') {
    function setDensity(density) {
        const densityRegex = /density-\S+/g;
        document.documentElement.className = document.documentElement.className.replace(densityRegex, '').trim();
        document.body.className = document.body.className.replace(densityRegex, '').trim();
        
        if (density !== 'comfortable') {
            document.documentElement.classList.add('density-' + density);
            document.body.classList.add('density-' + density);
        }
        localStorage.setItem('naf-density', density);
    }
    
    // Load saved density on page load
    (function() {
        const density = localStorage.getItem('naf-density') || 'comfortable';
        if (density !== 'comfortable') {
            document.documentElement.classList.add('density-' + density);
            document.body.classList.add('density-' + density);
        }
    })();
}
</script>
