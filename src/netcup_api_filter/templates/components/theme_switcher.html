{# 
   Theme Switcher Component
   
   Dropdown with theme and density options.
   Uses localStorage for persistence.
   Ported from /component-demo-bs5
#}

<div class="dropdown">
    <button class="btn btn-sm btn-outline-secondary border-0" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
            title="Theme & Density">
        <i class="bi bi-stars"></i>
    </button>
    <div class="dropdown-menu dropdown-menu-end" style="min-width: 220px;">
        <h6 class="dropdown-header">
            <i class="bi bi-brush me-2"></i>Theme
        </h6>
        
        {# Theme Options - 7 core themes from component-demo-bs5 #}
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('cobalt-2')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #3b7cf5, #070a14)"></span>
            <span>Cobalt 2</span>
            <span class="ms-auto text-muted small">â˜…</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('graphite')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #3b82f6, #08080c)"></span>
            <span>Graphite</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('obsidian-noir')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #a78bfa, #08080d)"></span>
            <span>Obsidian Noir</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('ember')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #f97316, #0b0907)"></span>
            <span>Ember</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('jade')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #34d399, #060908)"></span>
            <span>Jade</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('rose-quartz')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #f472b6, #0b090a)"></span>
            <span>Rose Quartz</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setTheme('gold-dust')">
            <span class="theme-swatch" style="background: linear-gradient(135deg, #fbbf24, #0a0907)"></span>
            <span>Gold Dust</span>
        </button>
        
        <div class="dropdown-divider"></div>
        
        <h6 class="dropdown-header">
            <i class="bi bi-arrows-collapse me-2"></i>Density
        </h6>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setDensity('comfortable')">
            <i class="bi bi-distribute-vertical"></i>
            <span>Comfortable</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setDensity('compact')">
            <i class="bi bi-arrows-collapse"></i>
            <span>Compact</span>
        </button>
        <button class="dropdown-item d-flex align-items-center gap-2" onclick="setDensity('ultra-compact')">
            <i class="bi bi-arrows-vertical"></i>
            <span>Ultra Compact</span>
        </button>
    </div>
</div>

<script>
// Theme and Density switcher functions
// Included with component so always available
if (typeof setTheme === 'undefined') {
    function setTheme(theme) {
        const themeRegex = /theme-\S+/g;
        document.documentElement.className = document.documentElement.className.replace(themeRegex, '').trim();
        document.body.className = document.body.className.replace(themeRegex, '').trim();
        document.documentElement.setAttribute('data-theme', theme);
        
        if (theme !== 'cobalt-2') {
            document.documentElement.classList.add('theme-' + theme);
            document.body.classList.add('theme-' + theme);
        }
        localStorage.setItem('naf-theme', theme);
    }
}

if (typeof setDensity === 'undefined') {
    function setDensity(density) {
        const densityRegex = /density-\S+/g;
        document.documentElement.className = document.documentElement.className.replace(densityRegex, '').trim();
        document.body.className = document.body.className.replace(densityRegex, '').trim();
        
        if (density !== 'comfortable') {
            document.documentElement.classList.add('density-' + density);
            document.body.classList.add('density-' + density);
        }
        localStorage.setItem('naf-density', density);
    }
    
    // Load saved density on page load
    (function() {
        const density = localStorage.getItem('naf-density') || 'comfortable';
        if (density !== 'comfortable') {
            document.documentElement.classList.add('density-' + density);
            document.body.classList.add('density-' + density);
        }
    })();
}
</script>
